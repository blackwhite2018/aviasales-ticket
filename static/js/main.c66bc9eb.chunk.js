(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],[,,function(e,t,a){e.exports={ticket:"TicketListItem_ticket__3EtiR","ticket-header":"TicketListItem_ticket-header__34qTm","ticket-header__price":"TicketListItem_ticket-header__price__Diq6H","ticket-header__logo":"TicketListItem_ticket-header__logo__r_aiD","row--title":"TicketListItem_row--title__2cCQS","row--data":"TicketListItem_row--data__oPKGA"}},,,,,,,,function(e,t,a){e.exports={header:"Header_header__MbTxY",logo:"Header_logo__3yB-7",logo__img:"Header_logo__img__f2igb"}},function(e,t,a){e.exports={"transfer-item":"TransferItem_transfer-item__2BWWC","transfer-item__input":"TransferItem_transfer-item__input__3JRak","transfer-item__text":"TransferItem_transfer-item__text__2hFOY"}},function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__1LkS7",sidebar__title:"Sidebar_sidebar__title__ohKln",transfer:"Sidebar_transfer__3KRWf"}},function(e,t,a){e.exports={page:"App_page__1yGSX",wrapper:"App_wrapper__Z-VQ8",main:"App_main__9tVZ8"}},,,,function(e,t,a){e.exports={tab:"Tab_tab__34Zof","tab--active":"Tab_tab--active__JewID"}},function(e,t,a){e.exports={"ticket-list":"TicketList_ticket-list__1lgRV","show-tickets":"TicketList_show-tickets__1-V63"}},,,,function(e,t,a){e.exports={content:"Content_content__3G3IW"}},function(e,t,a){e.exports={tabs:"Tabs_tabs__1Odzd"}},,function(e,t,a){e.exports=a(45)},,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"sortTicketAction",(function(){return b})),a.d(n,"transferItemAction",(function(){return T})),a.d(n,"updateSearchId",(function(){return S})),a.d(n,"loadedTickets",(function(){return y})),a.d(n,"updateTickets",(function(){return I})),a.d(n,"getSearchId",(function(){return N})),a.d(n,"ticketLoad",(function(){return O}));var r=a(0),c=a.n(r),i=a(8),o=a(1),l=a(3),s=a(21),u=a(24),d=Array(5).fill(!1),m=function(e){return e.every((function(e){return!0===e}))},f=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0,n=null===(e=a.payload)||void 0===e?void 0:e.index,r=Object(u.a)(t),c=!1;switch((r[0]&&0===a.payload.index||0===n&&a.payload.value)&&(c=!r[0],r=r.map((function(e){return c}))),a.type){case"TRANSFER_ACTIVE_SORT":return r[a.payload.index]=a.payload.value,m(r.slice(1))&&(r[0]=!0),m(r)||(r[0]=!1),r;default:return t}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_SORT":return t.payload;default:return e}},p=[],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_TICKETS":return e.concat(t.payload);default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"UPDATE_SEARCH_ID":return n;default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADED_TICKETS":return!0;default:return e}},k=Object(l.c)({transferSort:f,active:_,tickets:E,searchId:h,loadedTickets:v}),g=Object(l.d)(k,Object(l.a)(s.a)),b=function(e){return{type:"SELECT_SORT",payload:e}},T=function(e){return{type:"TRANSFER_ACTIVE_SORT",payload:e}},S=function(e){return{type:"UPDATE_SEARCH_ID",payload:e}},y=function(e){return{type:"LOADED_TICKETS",payload:e}},I=function(e){return{type:"UPDATE_TICKETS",payload:e}},N=function(e){return function(t){fetch(t).then((function(e){return e.json()})).then((function(t){t.searchId&&e(S(t.searchId))})).catch((function(e){console.error(e)}))}},O=function(e){return function(t){!function e(t,a){fetch(t).then((function(e){return e.json()})).then((function(n){n&&(a(I(n.tickets)),a(y(n.stop)),n.stop?console.log("ticket loaded"):setTimeout(e,1e4,t,a))})).catch((function(e){console.error(e),a(y(!0))}))}(t,e)}},j=a(10),w=a.n(j),x=function(){return c.a.createElement("header",{className:w.a.header},c.a.createElement("div",{className:w.a.logo},c.a.createElement("img",{src:"".concat("/aviasales-ticket","/img/Logo.png"),className:w.a.logo__img,alt:"aviasales"})))},A=a(4),L=a.n(A),C=n,D=a(11),R=a.n(D),H=Object(o.b)((function(e){return{transferSort:e.transferSort}}),C)((function(e){var t=e.index,a=e.value,n=e.transferSort,r=e.transferItemAction;return c.a.createElement("label",{htmlFor:"transfer-item-".concat(String(t)),className:R.a["transfer-item"]},c.a.createElement("input",{type:"checkbox",onClick:function(e){var a=e.currentTarget;r({index:t,value:a.checked})},id:"transfer-item-".concat(String(t)),className:R.a["transfer-item__input"],checked:n[t]}),c.a.createElement("span",{className:R.a["transfer-item__text"]},a))})),K=a(12),M=a.n(K),V=["\u0412\u0441\u0435","\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"].map((function(e,t){return c.a.createElement(H,{key:L.a.generate(),value:e,index:t})})),P=function(){return c.a.createElement("aside",{className:M.a.sidebar},c.a.createElement("h3",{className:M.a.sidebar__title},"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),c.a.createElement("form",{action:"",className:M.a.transfer},V))},F=a(22),J=a.n(F),U=function(e){var t=e.children;return c.a.createElement("section",{className:J.a.content},t)},W=a(17),B=a.n(W),G=Object(o.b)((function(e){return{indexActive:e.active}}),C)((function(e){var t=e.index,a=e.value,n=e.indexActive,r=e.sortTicketAction;return c.a.createElement("button",{type:"button",className:"".concat(B.a.tab," ").concat(t===n?B.a["tab--active"]:""),onClick:function(){r(t)}},a)})),Z=a(23),q=a.n(Z),Q=["\u0441\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439","\u0441\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"],Y=function(){return c.a.createElement("div",{className:q.a.tabs},Q.map((function(e,t){return c.a.createElement(G,{key:L.a.generate(),index:t,value:e})})))},z=a(6),X=a(47),$=a(2),ee=a.n($),te=function(e){var t=e.ticket,a=t.price,n=t.segments,r=Object(z.a)(n,2),i=r[0],o=r[1];return c.a.createElement("div",{className:ee.a.ticket},c.a.createElement("div",{className:ee.a["ticket-header"]},c.a.createElement("div",{className:ee.a["ticket-header__price"]},a," \u0420"),c.a.createElement("div",{className:ee.a["ticket-header__logo"]})),c.a.createElement("table",null,c.a.createElement("tbody",null,c.a.createElement("tr",{className:ee.a["row--title"]},c.a.createElement("td",null,"".concat(i.origin,"-").concat(i.destination)),c.a.createElement("td",null,"\u0432 \u043f\u0443\u0442\u0438"),c.a.createElement("td",null,n[0].stops.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")),c.a.createElement("tr",{className:ee.a["row--data"]},c.a.createElement("td",null,"".concat(Object(X.a)(new Date(i.date),"HH:mm"))),c.a.createElement("td",null,"".concat(Math.floor(i.duration/60),"\u0447 ").concat(Math.floor(i.duration%60),"\u043c")),c.a.createElement("td",null,i.stops.join(", "))),c.a.createElement("tr",{className:ee.a["row--title"]},c.a.createElement("td",null,"".concat(o.origin,"-").concat(o.destination)),c.a.createElement("td",null,"\u0432 \u043f\u0443\u0442\u0438"),c.a.createElement("td",null,n[1].stops.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430")),c.a.createElement("tr",{className:ee.a["row--data"]},c.a.createElement("td",null,"".concat(Object(X.a)(new Date(o.date),"HH:mm"))),c.a.createElement("td",null,"".concat(Math.floor(o.duration/60),"\u0447 ").concat(Math.floor(o.duration%60),"\u043c")),c.a.createElement("td",null,o.stops.join(", "))))))},ae=a(18),ne=a.n(ae),re=function(e,t){return 0===e?t.sort((function(e,t){return e.price-t.price})):t.sort((function(e,t){return e.segments[0].duration-t.segments[0].duration+e.segments[1].duration-t.segments[1].duration}))},ce=Object(o.b)((function(e){return{tickets:e.tickets,active:e.active,transferSort:e.transferSort,loadedTickets:e.loadedTickets}}))((function(e){var t=e.tickets,a=e.active,n=e.transferSort,i=e.loadedTickets,o=Object(r.useState)(re(0,t)),l=Object(z.a)(o,2),s=l[0],u=l[1],d=Object(r.useState)(10),m=Object(z.a)(d,2),f=m[0],_=m[1];Object(r.useEffect)((function(){u(function(e,t){return e[0]?t:e[1]?t.filter((function(e){return 0===e.segments[0].stops.length&&0===e.segments[1].stops.length})):e[2]||e[3]||e[4]?t.filter((function(t){for(var a=1;a<4;a++)if((t.segments[0].stops.length===a||t.segments[1].stops.length===a)&&e[a+1])return!0;return!1})):t}(n,re(a,[].concat(t))))}),[t,a,n]);return 0===t.length&&i?c.a.createElement("div",null,"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"):c.a.createElement("div",{className:ne.a["ticket-list"]},s.slice(0,f).map((function(e){return c.a.createElement(te,{key:L.a.generate(),ticket:e})})),!i&&c.a.createElement("div",null,"loaded tickets"),i&&c.a.createElement("input",{type:"button",onClick:function(){_((function(e){return e+10}))},className:ne.a["show-tickets"],value:"Show tickets"}))})),ie=a(13),oe=a.n(ie),le=Object(o.b)((function(e){return{searchId:e.searchId}}),(function(e){return{actionSearchId:e(N),actionTicketLoad:e(O)}}))((function(e){var t=e.searchId,a=e.actionTicketLoad,n=e.actionSearchId;return Object(r.useEffect)((function(){n("https://aviasales-test-api.java-mentor.com/search")}),[]),Object(r.useEffect)((function(){t&&a("https://aviasales-test-api.java-mentor.com/tickets?searchId=".concat(t))}),[t]),c.a.createElement("div",{className:oe.a.page},c.a.createElement("div",{className:oe.a.wrapper},c.a.createElement(x,null),c.a.createElement("main",{className:oe.a.main},c.a.createElement(P,null),c.a.createElement(U,null,c.a.createElement(Y,null),c.a.createElement(ce,null)))))}));a(44);Object(i.render)(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,{store:g},c.a.createElement(le,null))),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.c66bc9eb.chunk.js.map